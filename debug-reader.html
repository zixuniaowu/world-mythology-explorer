<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Debug Reader</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .debug { background: #f0f0f0; padding: 10px; margin: 10px 0; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>山海経リーダー デバッグ</h1>
    
    <div class="debug">
        <h2>1. スクリプトの読み込み状態</h2>
        <div id="script-status"></div>
    </div>
    
    <div class="debug">
        <h2>2. データの確認</h2>
        <div id="data-status"></div>
    </div>
    
    <div class="debug">
        <h2>3. 手動テスト</h2>
        <button onclick="testShowChapter()">showChapterテスト</button>
        <div id="test-result"></div>
    </div>
    
    <div class="debug">
        <h2>4. コンテンツ表示エリア</h2>
        <div id="content-area" style="border: 1px solid #ccc; min-height: 100px; padding: 10px;"></div>
    </div>

    <script src="shanhaijing-text.js"></script>
    <script>
        // スクリプトの読み込み確認
        const scriptStatus = document.getElementById('script-status');
        
        if (typeof SHANHAIJING_TEXTS !== 'undefined') {
            scriptStatus.innerHTML += '<p class="success">✓ shanhaijing-text.js 読み込み成功</p>';
        } else {
            scriptStatus.innerHTML += '<p class="error">✗ shanhaijing-text.js 読み込み失敗</p>';
        }
        
        // データの確認
        const dataStatus = document.getElementById('data-status');
        
        if (typeof SHANHAIJING_TEXTS !== 'undefined') {
            const chapters = Object.keys(SHANHAIJING_TEXTS);
            dataStatus.innerHTML += `<p class="success">✓ ${chapters.length}個の章が見つかりました</p>`;
            
            chapters.forEach(chapter => {
                const data = SHANHAIJING_TEXTS[chapter];
                dataStatus.innerHTML += `<p>- ${chapter}: ${data.title} (${data.sections.length}セクション)</p>`;
            });
            
            // 最初の章の詳細
            if (SHANHAIJING_TEXTS.eastern_chapter) {
                const east = SHANHAIJING_TEXTS.eastern_chapter;
                dataStatus.innerHTML += '<h3>東山経の詳細:</h3>';
                dataStatus.innerHTML += `<p>タイトル: ${east.title} / ${east.titleJa}</p>`;
                dataStatus.innerHTML += `<p>サブタイトル: ${east.subtitle}</p>`;
                dataStatus.innerHTML += `<p>セクション数: ${east.sections.length}</p>`;
                
                if (east.sections[0]) {
                    dataStatus.innerHTML += '<h4>最初のセクション:</h4>';
                    dataStatus.innerHTML += `<pre>${JSON.stringify(east.sections[0], null, 2)}</pre>`;
                }
            }
        }
        
        // 手動テスト
        function testShowChapter() {
            const result = document.getElementById('test-result');
            const contentArea = document.getElementById('content-area');
            
            try {
                result.innerHTML = '<p>テスト開始...</p>';
                
                const chapterData = SHANHAIJING_TEXTS.eastern_chapter;
                if (!chapterData) {
                    throw new Error('eastern_chapterが見つかりません');
                }
                
                // 簡単なHTMLを作成
                const html = `
                    <div style="background: white; padding: 20px; border: 1px solid #000;">
                        <h2>${chapterData.titleJa}（${chapterData.title}）</h2>
                        <p>${chapterData.subtitle}</p>
                        <hr>
                        ${chapterData.sections.map(section => `
                            <div style="margin: 20px 0;">
                                <h3>${section.title}</h3>
                                <p><strong>原文:</strong> ${section.original}</p>
                                <p><strong>日本語:</strong> ${section.japanese}</p>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                contentArea.innerHTML = html;
                result.innerHTML += '<p class="success">✓ コンテンツ表示成功</p>';
                
            } catch (error) {
                result.innerHTML += `<p class="error">✗ エラー: ${error.message}</p>`;
                console.error(error);
            }
        }
    </script>
</body>
</html>