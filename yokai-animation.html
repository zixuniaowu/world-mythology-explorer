<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¦–æ€ªçµµå·»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ - ç™¾é¬¼å¤œè¡Œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', 'MS Gothic', sans-serif;
            background: #0a0a0a;
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* å’Œç´™ãƒ†ã‚¯ã‚¹ãƒãƒ£é¢¨èƒŒæ™¯ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255,255,255,0.03) 2px, rgba(255,255,255,0.03) 4px),
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,255,255,0.03) 2px, rgba(255,255,255,0.03) 4px);
            pointer-events: none;
            z-index: 1;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .header {
            background: linear-gradient(to bottom, rgba(75, 0, 130, 0.8), rgba(0, 0, 0, 0.8));
            padding: 30px 0;
            text-align: center;
            box-shadow: 0 5px 20px rgba(147, 112, 219, 0.3);
            position: relative;
            z-index: 10;
        }

        .header h1 {
            font-size: 3em;
            color: #ff6b9d;
            text-shadow: 0 0 20px rgba(255, 107, 157, 0.5);
            margin-bottom: 10px;
            font-family: 'MS Mincho', serif;
        }

        .header p {
            font-size: 1.2em;
            color: #dda0dd;
        }

        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 2;
        }

        /* å¦–æ€ªé¸æŠ */
        .yokai-selector {
            background: rgba(75, 0, 130, 0.2);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #9370db;
            backdrop-filter: blur(10px);
        }

        .selector-title {
            font-size: 1.8em;
            color: #ff6b9d;
            margin-bottom: 20px;
            text-align: center;
        }

        .yokai-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .yokai-btn {
            background: rgba(147, 112, 219, 0.3);
            border: 2px solid #9370db;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            color: #e0e0e0;
        }

        .yokai-btn:hover {
            background: rgba(147, 112, 219, 0.5);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(147, 112, 219, 0.3);
        }

        .yokai-btn.active {
            background: rgba(255, 107, 157, 0.4);
            border-color: #ff6b9d;
        }

        .yokai-btn-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .yokai-btn-name {
            font-size: 1.1em;
            color: #dda0dd;
        }

        /* çµµå·»ã‚¹ãƒ†ãƒ¼ã‚¸ */
        .emaki-stage {
            background: #1a1a1a;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            margin-bottom: 30px;
        }

        #emakiCanvas {
            width: 100%;
            height: 400px;
            display: block;
        }

        /* çµµå·»ã‚¹ã‚¿ã‚¤ãƒ«ã®æ  */
        .emaki-frame {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            border: 15px solid transparent;
            border-image: linear-gradient(90deg, #8b4513, #d2691e) 1;
        }

        /* ç‰©èªãƒ†ã‚­ã‚¹ãƒˆ */
        .story-panel {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #9370db;
            backdrop-filter: blur(10px);
        }

        .story-title {
            font-size: 2em;
            color: #ff6b9d;
            margin-bottom: 15px;
            font-family: 'MS Mincho', serif;
        }

        .story-text {
            font-size: 1.2em;
            line-height: 1.8;
            color: #e0e0e0;
            text-align: justify;
        }

        /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« */
        .controls {
            background: rgba(75, 0, 130, 0.2);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, #9370db 0%, #ff6b9d 100%);
            border: none;
            border-radius: 25px;
            color: white;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(147, 112, 219, 0.3);
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(147, 112, 219, 0.5);
        }

        .control-btn:disabled {
            background: #555;
            cursor: not-allowed;
        }

        /* ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¨­å®š */
        .effect-settings {
            display: flex;
            align-items: center;
            gap: 15px;
            color: #dda0dd;
        }

        .effect-checkbox {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* æˆ»ã‚‹ãƒœã‚¿ãƒ³ */
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background: rgba(147, 112, 219, 0.8);
            color: white;
            border: 2px solid #dda0dd;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .back-button:hover {
            background: #ff6b9d;
            transform: translateY(-2px);
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            #emakiCanvas {
                height: 300px;
            }
            
            .yokai-grid {
                grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            }
            
            .yokai-btn {
                padding: 10px;
            }
            
            .yokai-btn-icon {
                font-size: 2em;
            }
        }

        /* å¦–ç«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        @keyframes float {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-20px) scale(1.1); }
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <a href="japanese-mythology-index.html" class="back-button">â† æˆ»ã‚‹</a>

    <div class="header">
        <h1>å¦–æ€ªçµµå·»</h1>
        <p>ç™¾é¬¼å¤œè¡Œã®ä¸–ç•Œã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½“é¨“</p>
    </div>

    <div class="container">
        <!-- å¦–æ€ªé¸æŠ -->
        <div class="yokai-selector">
            <h2 class="selector-title">å¦–æ€ªã‚’é¸æŠ</h2>
            <div class="yokai-grid">
                <button class="yokai-btn active" onclick="selectYokai('hyakki')">
                    <div class="yokai-btn-icon">ğŸ‘º</div>
                    <div class="yokai-btn-name">ç™¾é¬¼å¤œè¡Œ</div>
                </button>
                <button class="yokai-btn" onclick="selectYokai('tengu')">
                    <div class="yokai-btn-icon">ğŸ‘º</div>
                    <div class="yokai-btn-name">å¤©ç‹—</div>
                </button>
                <button class="yokai-btn" onclick="selectYokai('kitsune')">
                    <div class="yokai-btn-icon">ğŸ¦Š</div>
                    <div class="yokai-btn-name">ä¹å°¾ã®ç‹</div>
                </button>
                <button class="yokai-btn" onclick="selectYokai('yukionna')">
                    <div class="yokai-btn-icon">ğŸ‘»</div>
                    <div class="yokai-btn-name">é›ªå¥³</div>
                </button>
                <button class="yokai-btn" onclick="selectYokai('oni')">
                    <div class="yokai-btn-icon">ğŸ‘¹</div>
                    <div class="yokai-btn-name">é¬¼</div>
                </button>
                <button class="yokai-btn" onclick="selectYokai('kappa')">
                    <div class="yokai-btn-icon">ğŸ¢</div>
                    <div class="yokai-btn-name">æ²³ç«¥</div>
                </button>
            </div>
        </div>

        <!-- çµµå·»ã‚¹ãƒ†ãƒ¼ã‚¸ -->
        <div class="emaki-stage">
            <canvas id="emakiCanvas"></canvas>
            <div class="emaki-frame"></div>
        </div>

        <!-- ç‰©èªãƒ‘ãƒãƒ« -->
        <div class="story-panel">
            <h3 class="story-title" id="storyTitle">ç™¾é¬¼å¤œè¡Œ</h3>
            <p class="story-text" id="storyText">
                æ·±å¤œã€äº¬ã®éƒ½ã®å¤§è·¯ã‚’ã€ã‚ã‚‰ã‚†ã‚‹å¦–æ€ªãŸã¡ãŒç·´ã‚Šæ­©ãã€‚
                ã“ã‚ŒãŒç™¾é¬¼å¤œè¡Œã§ã‚ã‚‹ã€‚äººé–“ãŒå¯é™ã¾ã£ãŸä¸‘ä¸‰ã¤æ™‚ã€
                å¦–æ€ªãŸã¡ã¯è‡ªç”±ã«è¡—ã‚’é—Šæ­©ã—ã€å®´ã‚’æ¥½ã—ã‚€ã®ã ã€‚
            </p>
        </div>

        <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
        <div class="controls">
            <button class="control-btn" onclick="playAnimation()">
                â–¶ å†ç”Ÿ
            </button>
            <button class="control-btn" onclick="pauseAnimation()">
                â¸ ä¸€æ™‚åœæ­¢
            </button>
            <button class="control-btn" onclick="resetAnimation()">
                â® ãƒªã‚»ãƒƒãƒˆ
            </button>
            
            <div class="effect-settings">
                <div class="effect-checkbox">
                    <input type="checkbox" id="particleEffect" checked>
                    <label for="particleEffect">å¦–ç«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</label>
                </div>
                <div class="effect-checkbox">
                    <input type="checkbox" id="soundEffect">
                    <label for="soundEffect">åŠ¹æœéŸ³</label>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ã‚­ãƒ£ãƒ³ãƒã‚¹è¨­å®š
        const canvas = document.getElementById('emakiCanvas');
        const ctx = canvas.getContext('2d');
        
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹
        let animationId = null;
        let isPlaying = false;
        let currentYokai = 'hyakki';
        let scrollX = 0;
        let particles = [];

        // å¦–æ€ªãƒ‡ãƒ¼ã‚¿
        const yokaiStories = {
            hyakki: {
                title: 'ç™¾é¬¼å¤œè¡Œ',
                text: 'æ·±å¤œã€äº¬ã®éƒ½ã®å¤§è·¯ã‚’ã€ã‚ã‚‰ã‚†ã‚‹å¦–æ€ªãŸã¡ãŒç·´ã‚Šæ­©ãã€‚ã“ã‚ŒãŒç™¾é¬¼å¤œè¡Œã§ã‚ã‚‹ã€‚äººé–“ãŒå¯é™ã¾ã£ãŸä¸‘ä¸‰ã¤æ™‚ã€å¦–æ€ªãŸã¡ã¯è‡ªç”±ã«è¡—ã‚’é—Šæ­©ã—ã€å®´ã‚’æ¥½ã—ã‚€ã®ã ã€‚'
            },
            tengu: {
                title: 'å¤©ç‹—ã®å±±',
                text: 'æ·±å±±å¹½è°·ã«ä½ã¾ã†å¤©ç‹—ã¯ã€ä¿®é¨“é“ã®å®ˆè­·è€…ã§ã‚ã‚Šã€æ­¦è¡“ã®é”äººã§ã‚‚ã‚ã‚‹ã€‚èµ¤ã„é¡”ã¨é•·ã„é¼»ã€èƒŒä¸­ã®ç¿¼ã§ç©ºã‚’è‡ªåœ¨ã«é£›ã³å›ã‚Šã€äººé‡Œã«é™ã‚Šã¦ã¯æ§˜ã€…ãªç¥é€šåŠ›ã‚’è¦‹ã›ã¤ã‘ã‚‹ã€‚'
            },
            kitsune: {
                title: 'ä¹å°¾ã®ç‹',
                text: 'åƒå¹´ã‚’ç”ŸããŸç‹ã¯ä¹ã¤ã®å°¾ã‚’æŒã¡ã€çµ¶ä¸–ã®ç¾å¥³ã«åŒ–ã‘ã¦å›½ã‚’å‚¾ã‘ã‚‹ã€‚ãã®å¦–åŠ›ã¯è¨ˆã‚ŠçŸ¥ã‚Œãšã€ä¸€å›½ã®é‹å‘½ã™ã‚‰å·¦å³ã™ã‚‹ã€‚ã—ã‹ã—ã€ãã®å¿ƒã«ã¯æ·±ã„å­¤ç‹¬ãŒå®¿ã£ã¦ã„ã‚‹ã¨ã„ã†ã€‚'
            },
            yukionna: {
                title: 'é›ªå¥³ã®æ‚²æ‹',
                text: 'å¹é›ªã®å¤œã«ç¾ã‚Œã‚‹é›ªå¥³ã¯ã€ç™½ã„ç€ç‰©ã‚’çºã£ãŸç¾ã—ã„å¥³æ€§ã®å§¿ã‚’ã—ã¦ã„ã‚‹ã€‚è¿·ã„äººã‚’å‡æ­»ã•ã›ã‚‹ã¨ã„ã†æã‚ã—ã„å¦–æ€ªã ãŒã€æ™‚ã«äººé–“ã®ç”·æ€§ã¨æ‹ã«è½ã¡ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã¨ã„ã†ã€‚'
            },
            oni: {
                title: 'é¬¼ãƒ¶å³¶',
                text: 'è§’ã¨ç‰™ã‚’æŒã¤é¬¼ã¯ã€æ€ªåŠ›ç„¡åŒã®å¦–æ€ªã§ã‚ã‚‹ã€‚é‡‘æ£’ã‚’æŒ¯ã‚Šå›ã—ã€äººé‡Œã‚’è¥²ã†ã“ã¨ã‚‚ã‚ã‚‹ãŒã€ä¸€æ–¹ã§ç¾©ç†äººæƒ…ã«åšã„ä¸€é¢ã‚‚æŒã¤ã€‚ç¯€åˆ†ã®è±†ã«ã¯å¼±ã„ã¨ã„ã†ã€‚'
            },
            kappa: {
                title: 'æ²³ç«¥ã®æ©è¿”ã—',
                text: 'å·ã‚„æ± ã«ä½ã‚€æ²³ç«¥ã¯ã€é ­ã®çš¿ã«æ°´ã‚’è²¯ã‚ã¦ã„ã‚‹ã€‚ç›¸æ’²ãŒå¤§å¥½ãã§ã€ãã‚…ã†ã‚ŠãŒå¤§å¥½ç‰©ã€‚ã„ãŸãšã‚‰å¥½ãã ãŒã€åŠ©ã‘ã¦ãã‚ŒãŸäººé–“ã«ã¯æ©ã‚’è¿”ã™ã¨ã„ã†å¾‹å„€ãªä¸€é¢ã‚‚ã‚ã‚‹ã€‚'
            }
        };

        // ã‚­ãƒ£ãƒ³ãƒã‚¹ã®ãƒªã‚µã‚¤ã‚º
        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        }

        // å¦–æ€ªé¸æŠ
        function selectYokai(yokaiId) {
            currentYokai = yokaiId;
            const story = yokaiStories[yokaiId];
            
            // UIæ›´æ–°
            document.getElementById('storyTitle').textContent = story.title;
            document.getElementById('storyText').textContent = story.text;
            
            // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹æ›´æ–°
            document.querySelectorAll('.yokai-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.yokai-btn').classList.add('active');
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒªã‚»ãƒƒãƒˆ
            resetAnimation();
        }

        // çµµå·»é¢¨èƒŒæ™¯æç”»
        function drawEmakiBackground() {
            // å’Œç´™é¢¨ã®èƒŒæ™¯
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
            gradient.addColorStop(0, '#2a1f1a');
            gradient.addColorStop(0.5, '#3d2f26');
            gradient.addColorStop(1, '#2a1f1a');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // é›²ã®æ¨¡æ§˜
            ctx.fillStyle = 'rgba(255, 255, 255, 0.05)';
            for (let i = 0; i < 5; i++) {
                const x = (i * 200 - scrollX / 2) % (canvas.width + 200);
                drawCloud(x, 50 + i * 30);
            }
        }

        // é›²ã®æç”»
        function drawCloud(x, y) {
            ctx.beginPath();
            ctx.arc(x, y, 30, 0, Math.PI * 2);
            ctx.arc(x + 25, y, 35, 0, Math.PI * 2);
            ctx.arc(x + 50, y, 30, 0, Math.PI * 2);
            ctx.fill();
        }

        // ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function animate() {
            if (!isPlaying) return;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawEmakiBackground();
            
            // å¦–æ€ªåˆ¥ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            switch(currentYokai) {
                case 'hyakki':
                    animateHyakkiYagyo();
                    break;
                case 'tengu':
                    animateTengu();
                    break;
                case 'kitsune':
                    animateKitsune();
                    break;
                case 'yukionna':
                    animateYukiOnna();
                    break;
                case 'oni':
                    animateOni();
                    break;
                case 'kappa':
                    animateKappa();
                    break;
            }
            
            // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
            if (document.getElementById('particleEffect').checked) {
                updateParticles();
            }
            
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ›´æ–°
            scrollX += 2;
            
            animationId = requestAnimationFrame(animate);
        }

        // ç™¾é¬¼å¤œè¡Œã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function animateHyakkiYagyo() {
            const yokaiTypes = ['ğŸ‘º', 'ğŸ‘¹', 'ğŸ‘»', 'ğŸ¦Š', 'ğŸ¢'];
            const yokaiCount = 8;
            
            for (let i = 0; i < yokaiCount; i++) {
                const x = ((i * 150) - scrollX) % (canvas.width + 300) - 150;
                const y = canvas.height / 2 + Math.sin((scrollX + i * 50) * 0.01) * 50;
                const yokai = yokaiTypes[i % yokaiTypes.length];
                
                // å½±
                ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
                ctx.beginPath();
                ctx.ellipse(x, y + 60, 40, 15, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // å¦–æ€ª
                ctx.font = '60px sans-serif';
                ctx.fillText(yokai, x - 30, y);
                
                // å¦–ç«
                if (Math.random() < 0.02) {
                    particles.push({
                        x: x,
                        y: y - 30,
                        vx: (Math.random() - 0.5) * 2,
                        vy: -Math.random() * 2 - 1,
                        life: 1,
                        color: `hsl(${180 + Math.random() * 60}, 100%, 70%)`
                    });
                }
            }
        }

        // å¤©ç‹—ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function animateTengu() {
            const x = canvas.width / 2;
            const y = canvas.height / 2 + Math.sin(scrollX * 0.02) * 30;
            
            // å¤©ç‹—
            ctx.font = '100px sans-serif';
            ctx.fillText('ğŸ‘º', x - 50, y);
            
            // ç¿¼
            ctx.strokeStyle = '#8b4513';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(x - 20, y - 30);
            ctx.quadraticCurveTo(x - 80, y - 50, x - 100, y);
            ctx.moveTo(x + 20, y - 30);
            ctx.quadraticCurveTo(x + 80, y - 50, x + 100, y);
            ctx.stroke();
            
            // é¢¨ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
            for (let i = 0; i < 3; i++) {
                const windX = (scrollX * (i + 1) * 0.5) % canvas.width;
                ctx.strokeStyle = `rgba(255, 255, 255, ${0.1 - i * 0.03})`;
                ctx.beginPath();
                ctx.moveTo(windX, 0);
                ctx.quadraticCurveTo(windX + 50, canvas.height / 2, windX, canvas.height);
                ctx.stroke();
            }
        }

        // ä¹å°¾ã®ç‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function animateKitsune() {
            const x = canvas.width / 2;
            const y = canvas.height / 2;
            
            // ç‹
            ctx.font = '80px sans-serif';
            ctx.fillText('ğŸ¦Š', x - 40, y);
            
            // ä¹ã¤ã®å°¾
            ctx.strokeStyle = '#ff6b4a';
            ctx.lineWidth = 8;
            for (let i = 0; i < 9; i++) {
                const angle = (i - 4) * 0.2 + Math.sin(scrollX * 0.02) * 0.1;
                const tailX = x + Math.sin(angle) * 100;
                const tailY = y + 30 + Math.cos(angle) * 30;
                
                ctx.beginPath();
                ctx.moveTo(x, y + 20);
                ctx.quadraticCurveTo(x + 50, y + 40, tailX, tailY);
                ctx.stroke();
                
                // å°¾ã®å…ˆã®ç‚
                const fireX = tailX + Math.sin(scrollX * 0.1 + i) * 5;
                const fireY = tailY + Math.cos(scrollX * 0.1 + i) * 5;
                ctx.fillStyle = `hsl(${30 + i * 10}, 100%, 60%)`;
                ctx.beginPath();
                ctx.arc(fireX, fireY, 10 - i * 0.5, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // é›ªå¥³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function animateYukiOnna() {
            const x = canvas.width / 2 + Math.sin(scrollX * 0.01) * 50;
            const y = canvas.height / 2;
            
            // é›ªå¥³
            ctx.font = '80px sans-serif';
            ctx.fillText('ğŸ‘»', x - 40, y);
            
            // å¹é›ªã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
            for (let i = 0; i < 50; i++) {
                const snowX = (i * 20 + scrollX * 2) % canvas.width;
                const snowY = (i * 30 + scrollX) % canvas.height;
                
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                ctx.beginPath();
                ctx.arc(snowX, snowY, 2 + Math.random() * 3, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // å†·æ°—
            const gradient = ctx.createRadialGradient(x, y, 0, x, y, 150);
            gradient.addColorStop(0, 'rgba(200, 220, 255, 0.3)');
            gradient.addColorStop(1, 'transparent');
            ctx.fillStyle = gradient;
            ctx.fillRect(x - 150, y - 150, 300, 300);
        }

        // é¬¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function animateOni() {
            const x = canvas.width / 2;
            const y = canvas.height / 2 + Math.abs(Math.sin(scrollX * 0.05)) * 30;
            
            // é¬¼
            ctx.font = '100px sans-serif';
            ctx.fillText('ğŸ‘¹', x - 50, y);
            
            // é‡‘æ£’
            ctx.strokeStyle = '#8b4513';
            ctx.lineWidth = 10;
            ctx.beginPath();
            ctx.moveTo(x + 30, y - 20);
            ctx.lineTo(x + 80, y - 70);
            ctx.stroke();
            
            // é‡‘æ£’ã®çªèµ·
            for (let i = 0; i < 5; i++) {
                ctx.fillStyle = '#696969';
                ctx.beginPath();
                ctx.arc(x + 40 + i * 10, y - 30 - i * 10, 5, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // åœ°é¢ã®æŒ¯å‹•
            if (Math.abs(Math.sin(scrollX * 0.05)) < 0.1) {
                ctx.strokeStyle = 'rgba(139, 69, 19, 0.5)';
                ctx.lineWidth = 2;
                for (let i = 0; i < 3; i++) {
                    ctx.beginPath();
                    ctx.arc(x, y + 60, 30 + i * 20, 0, Math.PI * 2);
                    ctx.stroke();
                }
            }
        }

        // æ²³ç«¥ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function animateKappa() {
            const x = canvas.width / 2;
            const y = canvas.height / 2;
            
            // æ°´é¢
            ctx.fillStyle = 'rgba(100, 149, 237, 0.3)';
            ctx.fillRect(0, y + 40, canvas.width, canvas.height);
            
            // æ³¢ç´‹
            for (let i = 0; i < 3; i++) {
                const rippleSize = (scrollX + i * 50) % 200;
                ctx.strokeStyle = `rgba(100, 149, 237, ${0.5 - rippleSize / 400})`;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(x, y + 40, rippleSize, 0, Math.PI * 2);
                ctx.stroke();
            }
            
            // æ²³ç«¥
            const bobY = y + Math.sin(scrollX * 0.05) * 10;
            ctx.font = '80px sans-serif';
            ctx.fillText('ğŸ¢', x - 40, bobY);
            
            // é ­ã®çš¿
            ctx.fillStyle = 'rgba(135, 206, 235, 0.7)';
            ctx.beginPath();
            ctx.ellipse(x, bobY - 60, 30, 10, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // ãã‚…ã†ã‚Š
            if (scrollX % 200 < 100) {
                ctx.fillStyle = '#228b22';
                ctx.fillRect(x + 60, bobY - 20, 40, 15);
                ctx.fillStyle = '#006400';
                for (let i = 0; i < 4; i++) {
                    ctx.beginPath();
                    ctx.arc(x + 65 + i * 10, bobY - 12, 3, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ›´æ–°
        function updateParticles() {
            particles = particles.filter(p => p.life > 0);
            
            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.1;
                p.life -= 0.02;
                
                ctx.fillStyle = p.color;
                ctx.globalAlpha = p.life;
                ctx.beginPath();
                ctx.arc(p.x, p.y, 5 * p.life, 0, Math.PI * 2);
                ctx.fill();
            });
            
            ctx.globalAlpha = 1;
        }

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡
        function playAnimation() {
            if (!isPlaying) {
                isPlaying = true;
                animate();
            }
        }

        function pauseAnimation() {
            isPlaying = false;
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
        }

        function resetAnimation() {
            pauseAnimation();
            scrollX = 0;
            particles = [];
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawEmakiBackground();
        }

        // åˆæœŸåŒ–
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        drawEmakiBackground();
    </script>
</body>
</html>